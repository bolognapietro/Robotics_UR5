\hypertarget{namespaceutils_1_1segment_1_1general}{}\doxysection{utils.\+segment.\+general Namespace Reference}
\label{namespaceutils_1_1segment_1_1general}\index{utils.segment.general@{utils.segment.general}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespaceutils_1_1segment_1_1general_ac38718a35afb5e9f7fe2b97877c7ecb0}{crop\+\_\+mask}} (masks, boxes)
\item 
def \mbox{\hyperlink{namespaceutils_1_1segment_1_1general_a5c7305519170aa035cfcef70e19a6c95}{process\+\_\+mask\+\_\+upsample}} (protos, masks\+\_\+in, bboxes, shape)
\item 
def \mbox{\hyperlink{namespaceutils_1_1segment_1_1general_afb4ea55385579caaecac1aee08cabb85}{process\+\_\+mask}} (protos, masks\+\_\+in, bboxes, shape, upsample=False)
\item 
def \mbox{\hyperlink{namespaceutils_1_1segment_1_1general_a1c8d3fc9e3908ebdb19e9097df315840}{process\+\_\+mask\+\_\+native}} (protos, masks\+\_\+in, bboxes, shape)
\item 
def \mbox{\hyperlink{namespaceutils_1_1segment_1_1general_af0f049011ee0fb1bba64f7192b989b27}{scale\+\_\+image}} (im1\+\_\+shape, masks, im0\+\_\+shape, ratio\+\_\+pad=None)
\item 
def \mbox{\hyperlink{namespaceutils_1_1segment_1_1general_a003f62eb742e1176f7ffeb838d81ddff}{mask\+\_\+iou}} (mask1, mask2, eps=1e-\/7)
\item 
def \mbox{\hyperlink{namespaceutils_1_1segment_1_1general_a20f20e53661c4c0aa0abb31bb494b843}{masks\+\_\+iou}} (mask1, mask2, eps=1e-\/7)
\item 
def \mbox{\hyperlink{namespaceutils_1_1segment_1_1general_ad6f5a5647c9200a1f910265460132fe2}{masks2segments}} (masks, strategy=\textquotesingle{}largest\textquotesingle{})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespaceutils_1_1segment_1_1general_ac38718a35afb5e9f7fe2b97877c7ecb0}\label{namespaceutils_1_1segment_1_1general_ac38718a35afb5e9f7fe2b97877c7ecb0}} 
\index{utils.segment.general@{utils.segment.general}!crop\_mask@{crop\_mask}}
\index{crop\_mask@{crop\_mask}!utils.segment.general@{utils.segment.general}}
\doxysubsubsection{\texorpdfstring{crop\_mask()}{crop\_mask()}}
{\footnotesize\ttfamily def utils.\+segment.\+general.\+crop\+\_\+mask (\begin{DoxyParamCaption}\item[{}]{masks,  }\item[{}]{boxes }\end{DoxyParamCaption})}

\begin{DoxyVerb}"Crop" predicted masks by zeroing out everything not in the predicted bbox.
Vectorized by Chong (thanks Chong).

Args:
    - masks should be a size [n, h, w] tensor of masks
    - boxes should be a size [n, 4] tensor of bbox coords in relative point form
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaceutils_1_1segment_1_1general_a003f62eb742e1176f7ffeb838d81ddff}\label{namespaceutils_1_1segment_1_1general_a003f62eb742e1176f7ffeb838d81ddff}} 
\index{utils.segment.general@{utils.segment.general}!mask\_iou@{mask\_iou}}
\index{mask\_iou@{mask\_iou}!utils.segment.general@{utils.segment.general}}
\doxysubsubsection{\texorpdfstring{mask\_iou()}{mask\_iou()}}
{\footnotesize\ttfamily def utils.\+segment.\+general.\+mask\+\_\+iou (\begin{DoxyParamCaption}\item[{}]{mask1,  }\item[{}]{mask2,  }\item[{}]{eps = {\ttfamily 1e-\/7} }\end{DoxyParamCaption})}

\begin{DoxyVerb}mask1: [N, n] m1 means number of predicted objects
mask2: [M, n] m2 means number of gt objects
Note: n means image_w x image_h

return: masks iou, [N, M]
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaceutils_1_1segment_1_1general_ad6f5a5647c9200a1f910265460132fe2}\label{namespaceutils_1_1segment_1_1general_ad6f5a5647c9200a1f910265460132fe2}} 
\index{utils.segment.general@{utils.segment.general}!masks2segments@{masks2segments}}
\index{masks2segments@{masks2segments}!utils.segment.general@{utils.segment.general}}
\doxysubsubsection{\texorpdfstring{masks2segments()}{masks2segments()}}
{\footnotesize\ttfamily def utils.\+segment.\+general.\+masks2segments (\begin{DoxyParamCaption}\item[{}]{masks,  }\item[{}]{strategy = {\ttfamily \textquotesingle{}largest\textquotesingle{}} }\end{DoxyParamCaption})}

\mbox{\Hypertarget{namespaceutils_1_1segment_1_1general_a20f20e53661c4c0aa0abb31bb494b843}\label{namespaceutils_1_1segment_1_1general_a20f20e53661c4c0aa0abb31bb494b843}} 
\index{utils.segment.general@{utils.segment.general}!masks\_iou@{masks\_iou}}
\index{masks\_iou@{masks\_iou}!utils.segment.general@{utils.segment.general}}
\doxysubsubsection{\texorpdfstring{masks\_iou()}{masks\_iou()}}
{\footnotesize\ttfamily def utils.\+segment.\+general.\+masks\+\_\+iou (\begin{DoxyParamCaption}\item[{}]{mask1,  }\item[{}]{mask2,  }\item[{}]{eps = {\ttfamily 1e-\/7} }\end{DoxyParamCaption})}

\begin{DoxyVerb}mask1: [N, n] m1 means number of predicted objects
mask2: [N, n] m2 means number of gt objects
Note: n means image_w x image_h

return: masks iou, (N, )
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaceutils_1_1segment_1_1general_afb4ea55385579caaecac1aee08cabb85}\label{namespaceutils_1_1segment_1_1general_afb4ea55385579caaecac1aee08cabb85}} 
\index{utils.segment.general@{utils.segment.general}!process\_mask@{process\_mask}}
\index{process\_mask@{process\_mask}!utils.segment.general@{utils.segment.general}}
\doxysubsubsection{\texorpdfstring{process\_mask()}{process\_mask()}}
{\footnotesize\ttfamily def utils.\+segment.\+general.\+process\+\_\+mask (\begin{DoxyParamCaption}\item[{}]{protos,  }\item[{}]{masks\+\_\+in,  }\item[{}]{bboxes,  }\item[{}]{shape,  }\item[{}]{upsample = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Crop before upsample.
proto_out: [mask_dim, mask_h, mask_w]
out_masks: [n, mask_dim], n is number of masks after nms
bboxes: [n, 4], n is number of masks after nms
shape:input_image_size, (h, w)

return: h, w, n
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaceutils_1_1segment_1_1general_a1c8d3fc9e3908ebdb19e9097df315840}\label{namespaceutils_1_1segment_1_1general_a1c8d3fc9e3908ebdb19e9097df315840}} 
\index{utils.segment.general@{utils.segment.general}!process\_mask\_native@{process\_mask\_native}}
\index{process\_mask\_native@{process\_mask\_native}!utils.segment.general@{utils.segment.general}}
\doxysubsubsection{\texorpdfstring{process\_mask\_native()}{process\_mask\_native()}}
{\footnotesize\ttfamily def utils.\+segment.\+general.\+process\+\_\+mask\+\_\+native (\begin{DoxyParamCaption}\item[{}]{protos,  }\item[{}]{masks\+\_\+in,  }\item[{}]{bboxes,  }\item[{}]{shape }\end{DoxyParamCaption})}

\begin{DoxyVerb}Crop after upsample.
protos: [mask_dim, mask_h, mask_w]
masks_in: [n, mask_dim], n is number of masks after nms
bboxes: [n, 4], n is number of masks after nms
shape: input_image_size, (h, w)

return: h, w, n
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaceutils_1_1segment_1_1general_a5c7305519170aa035cfcef70e19a6c95}\label{namespaceutils_1_1segment_1_1general_a5c7305519170aa035cfcef70e19a6c95}} 
\index{utils.segment.general@{utils.segment.general}!process\_mask\_upsample@{process\_mask\_upsample}}
\index{process\_mask\_upsample@{process\_mask\_upsample}!utils.segment.general@{utils.segment.general}}
\doxysubsubsection{\texorpdfstring{process\_mask\_upsample()}{process\_mask\_upsample()}}
{\footnotesize\ttfamily def utils.\+segment.\+general.\+process\+\_\+mask\+\_\+upsample (\begin{DoxyParamCaption}\item[{}]{protos,  }\item[{}]{masks\+\_\+in,  }\item[{}]{bboxes,  }\item[{}]{shape }\end{DoxyParamCaption})}

\begin{DoxyVerb}Crop after upsample.
protos: [mask_dim, mask_h, mask_w]
masks_in: [n, mask_dim], n is number of masks after nms
bboxes: [n, 4], n is number of masks after nms
shape: input_image_size, (h, w)

return: h, w, n
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaceutils_1_1segment_1_1general_af0f049011ee0fb1bba64f7192b989b27}\label{namespaceutils_1_1segment_1_1general_af0f049011ee0fb1bba64f7192b989b27}} 
\index{utils.segment.general@{utils.segment.general}!scale\_image@{scale\_image}}
\index{scale\_image@{scale\_image}!utils.segment.general@{utils.segment.general}}
\doxysubsubsection{\texorpdfstring{scale\_image()}{scale\_image()}}
{\footnotesize\ttfamily def utils.\+segment.\+general.\+scale\+\_\+image (\begin{DoxyParamCaption}\item[{}]{im1\+\_\+shape,  }\item[{}]{masks,  }\item[{}]{im0\+\_\+shape,  }\item[{}]{ratio\+\_\+pad = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}img1_shape: model input shape, [h, w]
img0_shape: origin pic shape, [h, w, 3]
masks: [h, w, num]
\end{DoxyVerb}
 